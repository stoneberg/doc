


## department service Dockerfile
FROM openjdk:11
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} department-service.jar
ENTRYPOINT ["java","-jar","/department-service.jar"]


# user service Dockerfile
ARG JDK_VERSION
FROM openjdk:${JDK_VERSION}
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} user-service.jar
ENTRYPOINT ["java","-jar","/user-service.jar"]


# docker-compose.yml
version: '3'
services:
  user:
    container_name: user_service
    build:
      context: ./user-service
      args: 
        JDK_VERSION: 11
      dockerfile: Dockerfile  
    image: dailycodebuffer/user  
    ports:
      - 8081:8081
  department:
    container_name: department_service
    build:
      context: ./department-service
      dockerfile: Dockerfile
    image: dailycodebuffer/department 
    ports:
      - 8083:8082
    links:
      - "user:user_service"  
	  
	  
# docker-compose.override.yml
version: '3'
services:
  department:
    container_name: department_service_new
    image: dailycodebuffer/department_new
    ports:
      - 8084:8082